package ofx

import "fmt"

// generateTestOFX creates a valid OFX file for testing with the given transaction details.
func generateTestOFX(trnType, trnAmt, fitid, name string) string {
	return fmt.Sprintf(`OFXHEADER:100
DATA:OFXSGML
VERSION:102
SECURITY:NONE
ENCODING:USASCII
CHARSET:1252
COMPRESSION:NONE
OLDFILEUID:NONE
NEWFILEUID:NONE

<OFX>
<SIGNONMSGSRSV1>
<SONRS>
<STATUS>
<CODE>0
<SEVERITY>INFO
</STATUS>
<DTSERVER>20240201120000[0:GMT]
<LANGUAGE>ENG
<FI>
<ORG>TestBank
<FID>12345
</FI>
</SONRS>
</SIGNONMSGSRSV1>
<BANKMSGSRSV1>
<STMTTRNRS>
<TRNUID>1
<STATUS>
<CODE>0
<SEVERITY>INFO
</STATUS>
<STMTRS>
<CURDEF>USD
<BANKACCTFROM>
<BANKID>111111111
<ACCTID>123456789
<ACCTTYPE>CHECKING
</BANKACCTFROM>
<BANKTRANLIST>
<DTSTART>20240101120000[0:GMT]
<DTEND>20240131120000[0:GMT]
<STMTTRN>
<TRNTYPE>%s
<DTPOSTED>20240115120000[0:GMT]
<TRNAMT>%s
<FITID>%s
<NAME>%s
</STMTTRN>
</BANKTRANLIST>
<LEDGERBAL>
<BALAMT>1000.00
<DTASOF>20240131120000[0:GMT]
</LEDGERBAL>
</STMTRS>
</STMTTRNRS>
</BANKMSGSRSV1>
</OFX>`, trnType, trnAmt, fitid, name)
}

// generateTestOFXWithCheck creates a valid OFX file with a check transaction.
func generateTestOFXWithCheck(trnAmt, fitid, checkNum, name string) string {
	return fmt.Sprintf(`OFXHEADER:100
DATA:OFXSGML
VERSION:102
SECURITY:NONE
ENCODING:USASCII
CHARSET:1252
COMPRESSION:NONE
OLDFILEUID:NONE
NEWFILEUID:NONE

<OFX>
<SIGNONMSGSRSV1>
<SONRS>
<STATUS>
<CODE>0
<SEVERITY>INFO
</STATUS>
<DTSERVER>20240201120000[0:GMT]
<LANGUAGE>ENG
<FI>
<ORG>TestBank
<FID>12345
</FI>
</SONRS>
</SIGNONMSGSRSV1>
<BANKMSGSRSV1>
<STMTTRNRS>
<TRNUID>1
<STATUS>
<CODE>0
<SEVERITY>INFO
</STATUS>
<STMTRS>
<CURDEF>USD
<BANKACCTFROM>
<BANKID>111111111
<ACCTID>123456789
<ACCTTYPE>CHECKING
</BANKACCTFROM>
<BANKTRANLIST>
<DTSTART>20240101120000[0:GMT]
<DTEND>20240131120000[0:GMT]
<STMTTRN>
<TRNTYPE>CHECK
<DTPOSTED>20240125120000[0:GMT]
<TRNAMT>%s
<FITID>%s
<CHECKNUM>%s
<NAME>%s
</STMTTRN>
</BANKTRANLIST>
<LEDGERBAL>
<BALAMT>1000.00
<DTASOF>20240131120000[0:GMT]
</LEDGERBAL>
</STMTRS>
</STMTTRNRS>
</BANKMSGSRSV1>
</OFX>`, trnAmt, fitid, checkNum, name)
}
